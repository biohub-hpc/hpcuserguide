# Tutorial: Using `pigz` Command on an HPC System

`pigz` (Parallel Implementation of GZip) is a powerful tool for compressing and decompressing files. It leverages multiple processors and cores to speed up the process, making it especially useful on High-Performance Computing (HPC) systems. This tutorial will guide you through the basics of using `pigz`.

## Prerequisites
- Access to an HPC system with `pigz` installed.
- Basic knowledge of command-line operations.

## Why Use `pigz`?

- **Speed:** `pigz` utilizes multiple CPU cores, making it significantly faster than `gzip` for large files.
- **Compatibility:** Compressed files are fully compatible with `gzip`, meaning you can decompress them using `gzip` or `gunzip`.

## Basic Usage

### Compressing Files

To compress a file using `pigz`, simply use the following command:

```sh
pigz filename
```

This will create a compressed file named `filename.gz`.

### Decompressing Files

To decompress a file, use:

```sh
pigz -d filename.gz
```

This will recreate the original file `filename`.

Alternatively, you can use `unpigz`, which is a symbolic link to `pigz -d`:

```sh
unpigz filename.gz
```

### Compressing Multiple Files

You can compress multiple files at once by listing them after the `pigz` command:

```sh
pigz file1 file2 file3
```

This will create `file1.gz`, `file2.gz`, and `file3.gz`.

### Compressing Directories

To compress all files within a directory, you can use the following command in combination with `tar`:

```sh
tar cf - directory | pigz > directory.tar.gz
```

This will create a compressed archive `directory.tar.gz`.

### Decompressing Directories

To decompress a `.tar.gz` archive, use:

```sh
pigz -d directory.tar.gz
tar xf directory.tar
```

Or, you can combine the commands:

```sh
tar xzf directory.tar.gz
```

## Advanced Usage

### Adjusting Compression Level

`pigz` allows you to adjust the compression level (from 1 to 9). Level 1 is the fastest and least compressed, while level 9 is the slowest and most compressed. The default is level 6.

```sh
pigz -1 filename  # Fastest compression
pigz -9 filename  # Maximum compression
```

### Using Multiple Processors

By default, `pigz` uses all available processors. You can limit the number of processors used with the `-p` option:

```sh
pigz -p 4 filename  # Use 4 processors
```

### Keeping the Original File

To keep the original file after compression, use the `-k` option:

```sh
pigz -k filename
```

This will keep `filename` and create `filename.gz`.

### Verbose Output

For more detailed output during compression, use the `-v` option:

```sh
pigz -v filename
```

### Testing Compressed Files

To test the integrity of compressed files without decompressing them, use the `-t` option:

```sh
pigz -t filename.gz
```

## Common Errors and Troubleshooting

- **Command Not Found:** Ensure `pigz` is installed on your system. If not, contact your HPC administrator or install it using your package manager.
- **Permission Denied:** Ensure you have the necessary permissions to read/write the files you are compressing/decompressing.
- **Insufficient Memory:** Compressing very large files can be memory-intensive. If you encounter memory issues, try compressing smaller chunks or using fewer processors.

## Conclusion

`pigz` is a versatile and powerful tool for handling file compression on HPC systems. By leveraging parallel processing, it offers significant performance improvements over traditional compression tools. With this tutorial, you should be well-equipped to start using `pigz` effectively in your HPC environment.

For more details and advanced options, refer to the [pigz manual](https://zlib.net/pigz/).

*Note: AI Generated by ChatGPT-4o model, with human edits*

*Special thanks to **Yttria Aniseia** for this inclusion!*